<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FreshBite Campus Market</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #f7f7f7;
    }
    header {
        background: #4CAF50;
        color: white;
        padding: 20px;
        text-align: center;
    }
    .container {
        width: 90%;
        max-width: 450px;
        margin: 25px auto;
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 0 10px #cccccc;
    }
    input, select, button {
        width: 100%;
        padding: 12px;
        margin: 8px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    button {
        background: #4CAF50;
        color: white;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
    }
    #sellerPanel, #buyerPanel {
        display: none;
    }
    .product {
        background: #f1f1f1;
        padding: 10px;
        margin-top: 10px;
        border-radius: 5px;
        border-left: 5px solid #4CAF50;
    }
</style>
</head>
<body>

<header>
    <h1>FreshBite Campus Market</h1>
    <p>Affordable Vegetables for Students</p>
</header>

<div class="container" id="roleSelect">
    <h2>Choose Account Type</h2>
    <button onclick="chooseRole('seller')">I am a Seller</button>
    <button onclick="chooseRole('buyer')">I am a Buyer</button>
</div>

<div class="container" id="authSection" style="display:none;">
    <h2 id="authTitle">Login</h2>
    <input id="name" placeholder="Full Name">
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button onclick="registerUser()">Create Account</button>
    <button onclick="loginUser()">Login</button>
</div>

<!-- SELLER PANEL -->
<div class="container" id="sellerPanel">
    <h2>Seller Dashboard</h2>
    <input id="vegName" placeholder="Vegetable Name">
    <input id="vegPrice" placeholder="Price (GHC)">
    <button onclick="addVegetable()">Add Vegetable</button>

    <h3>My Vegetables</h3>
    <div id="sellerProducts"></div>
</div>

<!-- BUYER PANEL -->
<div class="container" id="buyerPanel">
    <h2>Buyer Dashboard</h2>
    <h3>Available Vegetables</h3>
    <div id="marketProducts"></div>
</div>

<script>
let selectedRole = "";
let currentUser = "";

function chooseRole(role) {
    selectedRole = role;
    document.getElementById("roleSelect").style.display = "none";
    document.getElementById("authSection").style.display = "block";

    document.getElementById("authTitle").innerText = 
        role === "seller" ? "Seller Login / Register" : "Buyer Login / Register";
}

function registerUser() {
    let user = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        pass: document.getElementById("password").value,
        role: selectedRole
    };

    localStorage.setItem(user.email, JSON.stringify(user));
    alert("Account created successfully!");
}

function loginUser() {
    let email = document.getElementById("email").value;
    let pass = document.getElementById("password").value;

    let user = localStorage.getItem(email);
    if (!user) return alert("Account not found!");

    let data = JSON.parse(user);
    if (data.pass !== pass) return alert("Wrong password!");

    currentUser = email;

    if (data.role === "seller") {
        showSellerPanel();
    } else {
        showBuyerPanel();
    }
}

function showSellerPanel() {
    document.getElementById("authSection").style.display = "none";
    document.getElementById("sellerPanel").style.display = "block";
    loadSellerProducts();
}

function showBuyerPanel() {
    document.getElementById("authSection").style.display = "none";
    document.getElementById("buyerPanel").style.display = "block";
    loadMarket();
}

function addVegetable() {
    let name = document.getElementById("vegName").value;
    let price = document.getElementById("vegPrice").value;

    let item = {
        seller: currentUser,
        name: name,
        price: price
    };

    let all = JSON.parse(localStorage.getItem("market") || "[]");
    all.push(item);

    localStorage.setItem("market", JSON.stringify(all));
    alert("Vegetable added!");

    loadSellerProducts();
}

function loadSellerProducts() {
    let all = JSON.parse(localStorage.getItem("market") || "[]");
    let myList = all.filter(v => v.seller === currentUser);

    let box = document.getElementById("sellerProducts");
    box.innerHTML = "";

    myList.forEach(v => {
        box.innerHTML += `<div class='product'>
            <b>${v.name}</b> - GHC ${v.price}
        </div>`;
    });
}

function loadMarket() {
    let all = JSON.parse(localStorage.getItem("market") || "[]");
    let box = document.getElementById("marketProducts");
    box.innerHTML = "";

    all.forEach(v => {
        box.innerHTML += `<div class='product'>
            <b>${v.name}</b> <br>
            Price: GHC ${v.price}<br>
            Seller: ${v.seller}
        </div>`;
    });
}
</script>

</body>
</html>
