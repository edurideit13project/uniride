<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FreshBite Campus Market</title>
<style>
body {font-family: 'Segoe UI', Tahoma; margin: 0; background: #f9f9f9; color: #222;}
header {background: linear-gradient(90deg,#0b3d91,#ffcc00); padding:1rem 2rem; display:flex; justify-content:space-between; align-items:center; color:#fff;}
nav button {margin-left:0.5rem;padding:0.5rem 1rem;border:none;border-radius:5px;cursor:pointer;background:#fff;color:#0b3d91;font-weight:bold;transition:0.3s;}
nav button:hover {opacity:0.8;}
.container {max-width:1000px;margin:2rem auto;padding:0 1rem;}
h1,h2,h3 {color:#0b3d91;}
.card {background:#fff;padding:1rem;margin-bottom:1rem;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.1);}
.btn {padding:0.5rem 1rem;border:none;border-radius:5px;cursor:pointer;}
.btn-primary {background:#0b3d91;color:#fff;}
.btn-success {background:#28a745;color:#fff;}
/* Modal styles */
.modal {display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;z-index: 1000;}
.modal-content {background:#fff;padding:2rem;border-radius:10px;width:90%;max-width:400px;position:relative;}
.modal-content label, .modal-content input {display:block;width:100%;margin-top:0.5rem; margin-bottom: 0.5rem;}
</style>
</head>
<body>

<header>
<h1>FreshBite Campus Market</h1>
<nav>
  <button id="nav-signup">Sign Up</button>
  <button id="nav-login">Login</button>
  <button id="nav-cart">Cart (0)</button>
</nav>
</header>

<div class="container">
<section id="home">
<h2>Welcome to FreshBite Campus Market</h2>
<p>Your everyday vegetable hub on campus. Browse, select, and get fresh vegetables delivered to your hostel for free!</p>
<button class="btn btn-primary" onclick="showMenu()">Browse Vegetables</button>
</section>

<section id="menu" style="display:none;">
<h2>Vegetable Menu</h2>
<div id="vegetable-list">Loading vegetables...</div>
</section>

<section id="cart-section" style="display:none;">
<h2>Your Cart</h2>
<div id="cart-items">Your cart is empty</div>
<p>Total: $<span id="cart-total">0.00</span></p>
<button class="btn btn-success" onclick="checkout()">Checkout</button>
</section>
</div>

<div id="signup-modal" class="modal">
  <div class="modal-content">
    <h3>Sign Up</h3>
    <form onsubmit="alert('Signup logic would go here.'); return false;">
      <label for="signup-email">Email:</label>
      <input type="email" id="signup-email" required>
      <label for="signup-pass">Password:</label>
      <input type="password" id="signup-pass" required>
      <button type="submit" class="btn btn-primary" style="margin-top:1rem;">Register</button>
      <button type="button" class="btn" onclick="closeModal('signup-modal')" style="background:#ccc; color:#222; margin-top:0.5rem;">Close</button>
    </form>
  </div>
</div>

<div id="login-modal" class="modal">
  <div class="modal-content">
    <h3>Login</h3>
    <form onsubmit="alert('Login logic would go here.'); return false;">
      <label for="login-email">Email:</label>
      <input type="email" id="login-email" required>
      <label for="login-pass">Password:</label>
      <input type="password" id="login-pass" required>
      <button type="submit" class="btn btn-primary" style="margin-top:1rem;">Login</button>
      <button type="button" class="btn" onclick="closeModal('login-modal')" style="background:#ccc; color:#222; margin-top:0.5rem;">Close</button>
    </form>
  </div>
</div>
<script>
// ===== Sample Vegetables =====
let vegetables = [
  {id:1,name:'Tomatoes',price:2.00},
  {id:2,name:'Onions',price:1.50},
  {id:3,name:'Carrots',price:1.80},
  {id:4,name:'Lettuce',price:2.50},
  {id:5,name:'Garden Eggs',price:2.00},
  {id:6,name:'Spinach',price:1.50}
];
let cart = [];

// ===== Modal Handlers =====
document.getElementById('nav-signup').addEventListener('click', () => { openModal('signup-modal'); });
document.getElementById('nav-login').addEventListener('click', () => { openModal('login-modal'); });

function openModal(id) {
    document.getElementById(id).style.display = 'flex';
}

function closeModal(id) {
    document.getElementById(id).style.display = 'none';
}

// Close modal if user clicks outside the content box
document.querySelectorAll('.modal').forEach(modal => {
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.style.display = 'none';
        }
    });
});

// ===== Render Menu (triggered by "Browse Vegetables") =====
function showMenu() {
  document.getElementById('home').style.display='none';
  document.getElementById('cart-section').style.display='none';
  document.getElementById('menu').style.display='block';
  const list = document.getElementById('vegetable-list');
  list.innerHTML='';
  vegetables.forEach(v=>{
    const div = document.createElement('div');
    div.className='card';
    div.innerHTML=<p><strong>${v.name}</strong></p><p>Price: $${v.price.toFixed(2)}</p><button class="btn btn-primary" onclick="addToCart(${v.id})">Add to Cart</button>;
    list.appendChild(div);
  });
}

// ===== Add to Cart (Used by menu buttons) =====
function addToCart(id){
  const veg = vegetables.find(v=>v.id===id);
  const existing = cart.find(c=>c.id===id);
  if(existing){ existing.qty++; }
  else{ cart.push({...veg, qty:1}); }
  updateCart();
}

// ===== Update Cart Counter in Header =====
function updateCart(){
  document.getElementById('nav-cart').textContent = Cart (${cart.reduce((a,b)=>a+b.qty,0)});
}

// ===== Show Cart & Render Items (triggered by "Cart (0)" button) =====
document.getElementById('nav-cart').addEventListener('click',()=>{
  document.getElementById('menu').style.display='none';
  document.getElementById('home').style.display='none';
  document.getElementById('cart-section').style.display='block';
  renderCartItems();
});

function renderCartItems() {
  const container = document.getElementById('cart-items');
  container.innerHTML='';
  if(cart.length===0){ container.innerHTML='Your cart is empty'; }
  else {
    cart.forEach(item=>{
      const div = document.createElement('div');
      div.className='card';
      // Display item details and current total for the item
      div.innerHTML=`<p>${item.name} - $${(item.price*item.qty).toFixed(2)}</p>
      <div style="display:flex; align-items:center;">
        <button class="btn" onclick="changeQuantity(${item.id}, -1)" style="background:#ff9900; color:#fff; margin-right:5px; padding: 0.3rem 0.6rem;">-</button>
        <span style="font-weight:bold; margin:0 10px;">${item.qty}</span>
        <button class="btn" onclick="changeQuantity(${item.id}, 1)" style="background:#4CAF50; color:#fff; padding: 0.3rem 0.6rem;">+</button>
        <button class="btn btn-primary" onclick="removeFromCart(${item.id})" style="margin-left:15px; background:#dc3545;">Remove All</button>
      </div>`;
      container.appendChild(div);
    });
  }

  // Update Total with 2 decimal places
  const total = cart.reduce((a,b)=>a+b.price*b.qty,0);
  document.getElementById('cart-total').textContent = total.toFixed(2);
}

// ===== Change Quantity (Increments/Decrements item count from cart view) =====
function changeQuantity(id, delta) {
    const item = cart.find(c => c.id === id);
    if (item) {
        item.qty += delta;
        if (item.qty <= 0) {
            removeFromCart(id); 
        } else {
            updateCart();
            renderCartItems(); 
        }
    }
}


// ===== Remove from Cart (Removes all items of that type) =====
function removeFromCart(id){
  cart = cart.filter(c=>c.id!==id);
  updateCart();
  renderCartItems(); 
  if(cart.length === 0) {
      document.getElementById('cart-section').style.display='none';
      document.getElementById('home').style.display='block';
  }
}

// ===== Checkout =====
function checkout(){
  if(cart.length===0){ alert('Cart is empty'); return; }
  alert(Order Placed! Total: $${document.getElementById('cart-total').textContent}. Your vegetables will be delivered shortly.);
  cart=[];
  updateCart();
  document.getElementById('cart-section').style.display='none';
  document.getElementById('home').style.display='block';
}

</script>

</body>
</html>
